import _ from "lodash";
import { NumericFormat } from "./numeric-format";
export class SignedFormat extends NumericFormat {
    format(value, options) {
        const { length } = options;
        if (isNaN(value)) {
            return "".padStart(length, "0");
        }
        let sign = (!_.isNil(value) && String(value) !== "" && !isNaN(value)) ? ((value < 0) ? "-" : "") : "";
        const MAX_ANALOG = 65535;
        const HALF_MAX_ANALOG = 32767;
        const MIN_ANALOG = -65535;
        const HALF_MIN_ANALOG = -32768;
        let formattedText = "";
        if (value > HALF_MAX_ANALOG) {
            sign = "-";
            value = value > MAX_ANALOG ? MAX_ANALOG : value;
            value -= MAX_ANALOG + 1;
        }
        else if (value < HALF_MIN_ANALOG) {
            sign = "";
            value = value > MIN_ANALOG ? value : MIN_ANALOG;
            value += MAX_ANALOG + 1;
        }
        formattedText = sign + Math.abs(value).toString().padStart(length, "0");
        return formattedText;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lnbmVkLWZvcm1hdC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImNoNS1qb2ludG90ZXh0LW51bWVyaWMvZm9ybWF0L3NpZ25lZC1mb3JtYXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxDQUFDLE1BQU0sUUFBUSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQU1qRCxNQUFNLE9BQU8sWUFBYSxTQUFRLGFBQWE7SUFFcEMsTUFBTSxDQUFDLEtBQWEsRUFBRSxPQUE0QjtRQUVyRCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDO1FBQzNCLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFDO1lBQ2IsT0FBTyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQztTQUNsQztRQUNELElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3RHLE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQztRQUN6QixNQUFNLGVBQWUsR0FBRyxLQUFLLENBQUM7UUFDOUIsTUFBTSxVQUFVLEdBQUcsQ0FBQyxLQUFLLENBQUM7UUFDMUIsTUFBTSxlQUFlLEdBQUcsQ0FBQyxLQUFLLENBQUM7UUFDL0IsSUFBSSxhQUFhLEdBQUcsRUFBRSxDQUFDO1FBRXZCLElBQUksS0FBSyxHQUFHLGVBQWUsRUFBRTtZQUN6QixJQUFJLEdBQUcsR0FBRyxDQUFDO1lBQ1gsS0FBSyxHQUFHLEtBQUssR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1lBQ2hELEtBQUssSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDO1NBQzNCO2FBQU0sSUFBSSxLQUFLLEdBQUcsZUFBZSxFQUFDO1lBQy9CLElBQUksR0FBRyxFQUFFLENBQUM7WUFDVixLQUFLLEdBQUcsS0FBSyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7WUFDaEQsS0FBSyxJQUFJLFVBQVUsR0FBRyxDQUFDLENBQUM7U0FDM0I7UUFHRCxhQUFhLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQztRQUN2RSxPQUFPLGFBQWEsQ0FBQztJQUN6QixDQUFDO0NBRUoifQ==